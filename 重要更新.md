# ğŸ‰ é‡è¦æ›´æ–°ï¼šç°åœ¨è‡ªåŠ¨ä¿å­˜å›¾ç‰‡äº†ï¼

## âœ¨ æ–°åŠŸèƒ½

ä¹‹å‰è„šæœ¬åªä¿å­˜æ–‡æœ¬æ ¼å¼çš„ç»“æœï¼Œç°åœ¨å·²ç»å‡çº§ï¼š

### ğŸ“¸ **è‡ªåŠ¨ä¿å­˜ç”Ÿæˆçš„å›¾ç‰‡**
- æ‰€æœ‰ç”Ÿæˆçš„å›¾ç‰‡è‡ªåŠ¨ä¿å­˜åˆ° `output/` æ–‡ä»¶å¤¹
- å›¾ç‰‡å‘½åæ ¼å¼ï¼š`åŸæ–‡ä»¶å_enhanced.png`
- ä¸å†åœ¨ JSON æ–‡ä»¶ä¸­æ˜¾ç¤ºå†—é•¿çš„ base64 æ•°æ®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šæµ‹è¯•é…ç½®ï¼ˆå¼ºçƒˆæ¨èï¼‰
```bash
python test_single_image.py
```
è¿™ä¼šæµ‹è¯•ä½ çš„é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œå¹¶æ˜¾ç¤ºå•å¼ å›¾ç‰‡çš„å¤„ç†ç»“æœã€‚

### ç¬¬äºŒæ­¥ï¼šæ‰¹é‡å¤„ç†
1. å°†æ‰€æœ‰è¦å¤„ç†çš„å›¾ç‰‡æ”¾å…¥ `images` æ–‡ä»¶å¤¹
2. è¿è¡Œï¼š
```bash
python batch_image_enhancer.py --config config.json
```

### ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹ç»“æœ
- **ç”Ÿæˆçš„å›¾ç‰‡**ï¼šåœ¨ `output/` æ–‡ä»¶å¤¹ä¸­
- **å¤„ç†æ—¥å¿—**ï¼š`results.json` å’Œ `results.txt`

## ğŸ“ æ–‡ä»¶ç»“æ„ç¤ºä¾‹

```
Gemini/
â”œâ”€â”€ images/              # åŸå§‹å›¾ç‰‡
â”‚   â”œâ”€â”€ photo1.jpg
â”‚   â”œâ”€â”€ photo2.png
â”‚   â””â”€â”€ photo3.jpg
â”œâ”€â”€ output/              # â­ ç”Ÿæˆçš„ç¾åŒ–å›¾ç‰‡
â”‚   â”œâ”€â”€ photo1_enhanced.png
â”‚   â”œâ”€â”€ photo2_enhanced.png
â”‚   â””â”€â”€ photo3_enhanced.png
â”œâ”€â”€ results.json         # å¤„ç†æ—¥å¿—ï¼ˆJSONï¼‰
â””â”€â”€ results.txt          # å¤„ç†æ—¥å¿—ï¼ˆæ–‡æœ¬ï¼‰
```

## âš™ï¸ é…ç½®è¯´æ˜

`config.json` ä¸­æ–°å¢äº† `output_dir` å‚æ•°ï¼š

```json
{
  "api_key": "ä½ çš„å¯†é’¥",
  "base_url": "https://ggdl.haohaozhongzhuan.com/v1",
  "input_dir": "./images",
  "output_dir": "output",     // â­ æ–°å¢ï¼šè¾“å‡ºå›¾ç‰‡ç›®å½•
  "prompt": "ä½ çš„æç¤ºè¯",
  "model": "gemini-2.5-flash-image-preview",
  "output_file": "results.json",
  "delay": 1.0,
  "temperature": 0.0,
  "max_tokens": 2048
}
```

## ğŸ”§ æŠ€æœ¯æ”¹è¿›

1. **è‡ªåŠ¨è§£æå›¾ç‰‡æ•°æ®**ï¼šä» API å“åº”ä¸­æå– base64 å›¾ç‰‡æ•°æ®
2. **è‡ªåŠ¨è§£ç ä¿å­˜**ï¼šå°† base64 æ•°æ®è§£ç ä¸ºçœŸå®å›¾ç‰‡æ–‡ä»¶
3. **æ™ºèƒ½å‘½å**ï¼šä¿æŒåŸæ–‡ä»¶åï¼Œæ·»åŠ  `_enhanced` åç¼€
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šä¸åœ¨æ—¥å¿—ä¸­ä¿å­˜å¤§é‡ base64 æ•°æ®ï¼Œå‡å°æ–‡ä»¶ä½“ç§¯

## ğŸ’¡ ä½¿ç”¨æç¤º

- é¦–æ¬¡è¿è¡Œå»ºè®®å…ˆç”¨ `test_single_image.py` æµ‹è¯•
- ç”Ÿæˆçš„å›¾ç‰‡ç»Ÿä¸€ä¸º PNG æ ¼å¼ï¼ˆä¿è¯è´¨é‡ï¼‰
- `output` æ–‡ä»¶å¤¹ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»º
- å¯ä»¥é€šè¿‡ `--output-dir` å‚æ•°è‡ªå®šä¹‰è¾“å‡ºç›®å½•

## ğŸ¯ å®Œæ•´å‘½ä»¤ç¤ºä¾‹

```bash
# ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰
python batch_image_enhancer.py --config config.json

# è‡ªå®šä¹‰è¾“å‡ºç›®å½•
python batch_image_enhancer.py --config config.json --output-dir "my_output"

# æµ‹è¯•å•å¼ å›¾ç‰‡
python test_single_image.py
```

---

ç°åœ¨ä½ å¯ä»¥ç›´æ¥è·å¾—ç¾åŒ–åçš„å›¾ç‰‡æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åªæœ‰æ–‡æœ¬æ•°æ®äº†ï¼ğŸ¨âœ¨

